={% extends "layouts/layout1.html" %}

{% block title %}
Silkroad Employee Management
{% endblock %}

{% block content %}

<div class="container">
  <script type="text/javascript">
      $(document).ready(function(){
          $('#query-type-selector input').on('click', function(event){
              $('#query-type-selection')[0].textContent = event.target.value;
              $('#hidden-query-type')[0].value = event.target.dataset.queryType;
              $('#query-type-selector').click();
          });
      });
  </script>

	<section id="Body">
		<h2>Employees</h2>
		<p>This page contains information about employees.
		   Employees can be filtered by State, City, or Zip
		   and metrics will change to reflect that.
		</p>
		<hr></hr>
		<h2> Overview Summary: </h2>
		<h3>
			<p><strong>{{ avg_sal_str }}</strong>    {{ avg_sal }}</p>
			<p><strong>{{ avg_hourly_str }}</strong>    {{ avg_hrly }}</p>
		</h3>

		<hr></hr>

		<!-- Search menu and input field -->
  <form method="/employees">
	    <div class="row">
		      <div class="col-lg-6">
			        <div class="input-group">
				          <div class="input-group-btn">
                      <input type="hidden" name="query_type" id="hidden-query-type"/>
					            <button class="btn btn-primary dropdown-toggle" id="query-type-selection"
                              data-toggle="dropdown" aria-haspopup="true"
                              aria-expanded="flase"> Select search type
						              <span class="caret"></span>
					            </button>
					            <ul class="dropdown-menu" id="query-type-selector" >
						              <li>
                              <input type="button" style="width:100%"
                                     class="btn btn-primary" id='search_byStore'
                                     value="Search By Store" data-query-type="store" />
                          </li>
						              <li>
                              <input type="button" style="width:100%"
                                     class="btn btn-primary" id='search_byState'
                                     value="Search by State" data-query-type="state">
                          </li>
						              <li>
                              <input type="button" style="width:100%"
                                     class="btn btn-primary" id='search_byCity'
                                     value="Search by City" data-query-type="city">
                          </li>
						              <li>
                              <input type="button" style="width:100%"
                                     class="btn btn-primary" id='search_byZip'
                                     value="Search by Zip" data-query-type="zip">
                          </li>
					            </ul>
				          </div>
			            <input type="text" class="form-control" id="sortKey" name="sort_key" />
		          </div>
	        </div>
	        <input type="submit" id="GO" class="btn btn-primary" />
      </div>
  </form>

	<hr></hr>

	<!-- Need to add logic to redirect to page and then on that page submit, get back here -->
	<!-- In prep, I am calling that page "Create Employee", which will also require assigning him to a store
		 since it is not allowed to have employees belonging nowhere. This means it will update both the
		 Employees table AND the Stores table. -->
	<button class='btn btn-primary' onclick='window.location = "/createEmployee"'>
      Create New Employee
  </button>

		<hr></hr>

		<h3>Coming soon: Employee deletion</h3>

		<hr></hr>

		<h1>Employees Table</h1>
		{{ empTable }}
	</section>
</div>

{% endblock %}
